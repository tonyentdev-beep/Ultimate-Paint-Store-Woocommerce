(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var a in t)e.o(t,a)&&!e.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.element,t=window.wp.apiFetch;var a=e.n(t);const n=window.wp.components,r=window.ReactJSXRuntime,i=()=>{const[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[c,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await a()({path:"/paint-store/v1/families"});t(e)}catch(e){console.error("Error fetching families:",e)}};return(0,r.jsxs)("div",{className:"color-families-manager",children:[(0,r.jsxs)(n.PanelBody,{title:"Add New Color Family",initialOpen:!0,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.TextControl,{label:"Family Name (e.g., Blues)",value:i,onChange:e=>l(e)})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.TextControl,{label:"Representative Hex Color (e.g., #0000FF)",value:o,onChange:e=>d(e)})}),(0,r.jsx)(n.Button,{variant:"primary",onClick:async()=>{if(i){h(!0);try{await a()({path:"/paint-store/v1/families",method:"POST",data:{name:i,hex_representative:o}}),l(""),d(""),x()}catch(e){console.error("Error creating family:",e)}h(!1)}},isBusy:c,disabled:!i||c,children:"Add Family"})]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("h3",{children:"Existing Families"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Slug"}),(0,r.jsx)("th",{children:"Color Hex"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",children:"No families found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.slug}),(0,r.jsxs)("td",{children:[(0,r.jsx)("span",{style:{display:"inline-block",width:"20px",height:"20px",backgroundColor:e.hex_representative,marginRight:"10px",border:"1px solid #ccc"}}),e.hex_representative]})]},e.id))})]})]})]})},l=()=>{const[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[c,h]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[j,m]=(0,s.useState)(""),[u,g]=(0,s.useState)([]),[v,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b(),f(),w()},[]);const b=async()=>{try{const e=await a()({path:"/paint-store/v1/families"});l(e)}catch(e){console.error("Error fetching families:",e)}},f=async()=>{try{const e=await a()({path:"/paint-store/v1/bases"});d(e)}catch(e){console.error("Error fetching bases:",e)}},w=async()=>{try{const e=await a()({path:"/paint-store/v1/colors"});t(e)}catch(e){console.error("Error fetching colors:",e)}},C=[{label:"Select a Family...",value:""},...i.map(e=>({label:e.name,value:e.id}))];return(0,r.jsxs)("div",{className:"colors-manager",style:{marginTop:"30px"},children:[(0,r.jsxs)(n.PanelBody,{title:"Add New Specific Color",initialOpen:!0,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.TextControl,{label:"Color Name (e.g., Naval Blue)",value:c,onChange:e=>h(e)})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.TextControl,{label:"Hex Value (e.g., #324354)",value:x,onChange:e=>p(e)})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.SelectControl,{label:"Assign to Family",value:j,options:C,onChange:e=>m(e)})}),(0,r.jsxs)("div",{style:{marginTop:"15px"},children:[(0,r.jsx)("p",{style:{fontWeight:600,marginBottom:"10px"},children:"Compatible Bases (Required)"}),0===o.length?(0,r.jsx)("p",{style:{color:"red",fontStyle:"italic"},children:"Please create Paint Bases in the Products & Bases tab first."}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:o.map(e=>(0,r.jsx)(n.CheckboxControl,{label:e.name,checked:u.includes(parseInt(e.id)),onChange:()=>{return s=parseInt(e.id),void g(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}},e.id))})]}),(0,r.jsx)(n.Button,{variant:"primary",onClick:async()=>{if(c&&j&&0!==u.length){y(!0);try{await a()({path:"/paint-store/v1/colors",method:"POST",data:{name:c,hex_value:x,rgb_value:"",family_id:j,base_ids:u}}),h(""),p(""),m(""),g([]),w()}catch(e){console.error("Error creating color:",e)}y(!1)}else alert("Name, Family, and at least one Base are required.")},isBusy:v,disabled:!c||!j||0===u.length||v,style:{marginTop:"20px"},children:"Add Color"})]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("h3",{children:"Existing Colors"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Family ID"}),(0,r.jsx)("th",{children:"Color Hex"}),(0,r.jsx)("th",{children:"Compatible Bases"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:"No colors found."})}):e.map(e=>{return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.family_id}),(0,r.jsxs)("td",{children:[(0,r.jsx)("span",{style:{display:"inline-block",width:"20px",height:"20px",backgroundColor:e.hex_value,marginRight:"10px",border:"1px solid #ccc"}}),e.hex_value]}),(0,r.jsx)("td",{children:(s=e.base_ids,s&&0!==s.length?s.map(e=>o.find(s=>parseInt(s.id)===e)?.name||e).join(", "):"None")})]},e.id);var s})})]})]})]})},o=()=>{const[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await a()({path:"/paint-store/v1/bases"});t(e)}catch(e){console.error("Error fetching bases:",e)}};return(0,r.jsxs)("div",{className:"bases-manager",children:[(0,r.jsxs)(n.PanelBody,{title:"Add New Paint Base",initialOpen:!0,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.TextControl,{label:"Base Name (e.g., Deep Base, Extra White)",value:i,onChange:e=>l(e)})}),(0,r.jsx)(n.Button,{variant:"primary",onClick:async()=>{if(i){d(!0);try{await a()({path:"/paint-store/v1/bases",method:"POST",data:{name:i}}),l(""),c()}catch(e){console.error("Error creating base:",e)}d(!1)}},isBusy:o,disabled:!i||o,children:"Add Base"})]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("h3",{children:"Existing Bases"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:"No bases found. Add some above."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.name})]},e.id))})]})]})]})},d=()=>{const[e,t]=(0,s.useState)("colors");return(0,r.jsxs)("div",{className:"paint-store-admin-wrap",children:[(0,r.jsx)("h1",{children:"Paint Store Management"}),(0,r.jsxs)("div",{className:"nav-tab-wrapper",style:{marginBottom:"20px"},children:[(0,r.jsx)("button",{className:"nav-tab "+("colors"===e?"nav-tab-active":""),onClick:()=>t("colors"),children:"Colors & Families"}),(0,r.jsx)("button",{className:"nav-tab "+("products"===e?"nav-tab-active":""),onClick:()=>t("products"),children:"Products & Bases"}),(0,r.jsx)("button",{className:"nav-tab "+("settings"===e?"nav-tab-active":""),onClick:()=>t("settings"),children:"Settings"})]}),(0,r.jsxs)("div",{className:"tab-content",children:["colors"===e&&(0,r.jsxs)("div",{children:[(0,r.jsx)(i,{}),(0,r.jsx)("hr",{style:{margin:"40px 0"}}),(0,r.jsx)(l,{})]}),"products"===e&&(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{}),(0,r.jsx)("hr",{style:{margin:"40px 0"}}),(0,r.jsx)("h2",{children:"Manage Products (Coming Soon)"}),(0,r.jsx)("p",{children:"Product mapping interface will go here."})]}),"settings"===e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Store Settings"}),(0,r.jsx)("p",{children:"General store settings."})]})]})]})};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("paint-store-admin-root");e&&(0,s.render)((0,r.jsx)(d,{}),e)})})();