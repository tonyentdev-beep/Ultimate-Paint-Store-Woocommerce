(()=>{"use strict";var e={n:s=>{var a=s&&s.__esModule?()=>s.default:()=>s;return e.d(a,{a}),a},d:(s,a)=>{for(var r in a)e.o(a,r)&&!e.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:a[r]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.element,a=window.wp.apiFetch;var r=e.n(a);const t=window.wp.components,n=window.ReactJSXRuntime,i=({families:e,fetchFamilies:a})=>{const[i,l]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[c,h]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"color-families-manager",children:[(0,n.jsxs)(t.PanelBody,{title:"Add New Color Family",initialOpen:!0,children:[(0,n.jsx)(t.PanelRow,{children:(0,n.jsx)(t.TextControl,{label:"Family Name (e.g., Blues)",value:i,onChange:e=>l(e)})}),(0,n.jsx)(t.PanelRow,{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:"15px"},children:[(0,n.jsx)("div",{style:{flex:1},children:(0,n.jsx)(t.TextControl,{label:"Representative Hex Color (e.g., #0000FF)",value:d,onChange:e=>o(e)})}),(0,n.jsx)("div",{className:"color-swatch-box",style:{width:"45px",height:"45px",backgroundColor:d||"#ffffff",marginTop:"15px"}})]})}),(0,n.jsx)(t.Button,{variant:"primary",onClick:async()=>{if(i){h(!0);try{await r()({path:"/paint-store/v1/families",method:"POST",data:{name:i,hex_representative:d}}),l(""),o(""),a()}catch(e){console.error("Error creating family:",e),alert("Error creating family: "+(e.message||JSON.stringify(e)))}h(!1)}},isBusy:c,disabled:!i||c,children:"Add Family"})]}),(0,n.jsxs)("div",{style:{marginTop:"30px"},children:[(0,n.jsx)("h3",{children:"Existing Families"}),(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Slug"}),(0,n.jsx)("th",{children:"Color Hex"})]})}),(0,n.jsx)("tbody",{children:0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",children:"No families found."})}):e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.name})}),(0,n.jsx)("td",{children:(0,n.jsx)("code",{children:e.slug})}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,n.jsx)("span",{className:"color-swatch-box",style:{display:"inline-block",width:"24px",height:"24px",backgroundColor:e.hex_representative}}),e.hex_representative]})})]},e.id))})]})]})]})},l=({colors:e,families:a,allBases:i,brands:l,fetchColors:d})=>{const[o,c]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[p,j]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[f,y]=(0,s.useState)([]),[v,C]=(0,s.useState)(!1),w=[{label:"Select a Family...",value:""},...a.map(e=>({label:e.name,value:e.id}))],S=[{label:"Select a Brand...",value:""},...l.map(e=>({label:e.name,value:e.id}))];return(0,n.jsxs)("div",{className:"colors-manager",style:{marginTop:"30px"},children:[(0,n.jsxs)(t.PanelBody,{title:"Add New Specific Color",initialOpen:!0,children:[(0,n.jsx)(t.PanelRow,{children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,n.jsx)(t.TextControl,{label:"Color Name (e.g., Naval Blue)",value:o,onChange:e=>c(e)}),(0,n.jsx)(t.TextControl,{label:"Color Code (e.g., SW 6593)",value:h,onChange:e=>x(e)})]})}),(0,n.jsx)(t.PanelRow,{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:"15px"},children:[(0,n.jsx)("div",{style:{flex:1},children:(0,n.jsx)(t.TextControl,{label:"Hex Value (e.g., #324354)",value:p,onChange:e=>j(e)})}),(0,n.jsx)("div",{className:"color-swatch-box",style:{width:"45px",height:"45px",backgroundColor:p||"#ffffff",marginTop:"15px"}})]})}),(0,n.jsx)(t.PanelRow,{children:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,n.jsx)(t.SelectControl,{label:"Assign to Family",value:m,options:w,onChange:e=>g(e)}),(0,n.jsx)(t.SelectControl,{label:"Assign to Brand",value:u,options:S,onChange:e=>b(e)})]})}),(0,n.jsxs)("div",{style:{marginTop:"15px",padding:"15px 20px"},children:[(0,n.jsx)("p",{style:{fontWeight:600,marginBottom:"10px"},children:"Compatible Bases (Required)"}),0===i.length?(0,n.jsx)("p",{style:{color:"red",fontStyle:"italic"},children:"Please create Paint Bases in the Products & Bases tab first."}):(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px"},children:i.map(e=>(0,n.jsx)(t.CheckboxControl,{label:e.name,checked:f.includes(parseInt(e.id)),onChange:()=>{return s=parseInt(e.id),void y(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}},e.id))})]}),(0,n.jsx)("div",{style:{padding:"0 20px 20px"},children:(0,n.jsx)(t.Button,{variant:"primary",onClick:async()=>{if(o&&m&&u&&0!==f.length){C(!0);try{await r()({path:"/paint-store/v1/colors",method:"POST",data:{name:o,color_code:h,hex_value:p,rgb_value:"",family_id:m,brand_id:u,base_ids:f}}),c(""),x(""),j(""),g(""),b(""),y([]),d()}catch(e){console.error("Error creating color:",e),alert("Error creating color: "+(e.message||JSON.stringify(e)))}C(!1)}else alert("Name, Family, Brand, and at least one Base are required.")},isBusy:v,disabled:!o||!m||!u||0===f.length||v,children:"Add Color"})})]}),(0,n.jsxs)("div",{style:{marginTop:"30px"},children:[(0,n.jsx)("h3",{children:"Existing Colors"}),(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Code"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Brand"}),(0,n.jsx)("th",{children:"Color Hex"}),(0,n.jsx)("th",{children:"Compatible Bases"})]})}),(0,n.jsx)("tbody",{children:0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"6",children:"No colors found."})}):e.map(e=>{return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.color_code||"-"})}),(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.name})}),(0,n.jsx)("td",{children:(a=e.brand_id,a?l.find(e=>parseInt(e.id)===parseInt(a))?.name||a:"-")}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,n.jsx)("span",{className:"color-swatch-box",style:{display:"inline-block",width:"24px",height:"24px",backgroundColor:e.hex_value}}),e.hex_value]})}),(0,n.jsx)("td",{children:(0,n.jsx)("em",{children:(s=e.base_ids,s&&0!==s.length?s.map(e=>i.find(s=>parseInt(s.id)===e)?.name||e).join(", "):"None")})})]},e.id);var s,a})})]})]})]})},d=({brands:e,fetchBrands:a})=>{const[i,l]=(0,s.useState)(""),[d,o]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"brands-manager",children:[(0,n.jsxs)(t.PanelBody,{title:"Add New Paint Brand",initialOpen:!0,children:[(0,n.jsx)(t.PanelRow,{children:(0,n.jsx)(t.TextControl,{label:"Brand Name (e.g., Sherwin Williams, Benjamin Moore)",value:i,onChange:e=>l(e)})}),(0,n.jsx)("div",{style:{padding:"10px 20px 20px"},children:(0,n.jsx)(t.Button,{variant:"primary",onClick:async()=>{if(i){o(!0);try{await r()({path:"/paint-store/v1/brands",method:"POST",data:{name:i}}),l(""),a()}catch(e){console.error("Error creating brand:",e),alert("Error creating brand: "+(e.message||JSON.stringify(e)))}o(!1)}},isBusy:d,disabled:!i||d,children:"Add Brand"})})]}),(0,n.jsxs)("div",{style:{marginTop:"30px"},children:[(0,n.jsx)("h3",{children:"Existing Brands"}),(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Name"})]})}),(0,n.jsx)("tbody",{children:0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"2",children:"No brands found. Add some above."})}):e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.name})})]},e.id))})]})]})]})},o=({bases:e,fetchBases:a})=>{const[i,l]=(0,s.useState)(""),[d,o]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"bases-manager",children:[(0,n.jsxs)(t.PanelBody,{title:"Add New Paint Base",initialOpen:!0,children:[(0,n.jsx)(t.PanelRow,{children:(0,n.jsx)(t.TextControl,{label:"Base Name (e.g., Deep Base, Extra White)",value:i,onChange:e=>l(e)})}),(0,n.jsx)("div",{style:{padding:"10px 20px 20px"},children:(0,n.jsx)(t.Button,{variant:"primary",onClick:async()=>{if(i){o(!0);try{await r()({path:"/paint-store/v1/bases",method:"POST",data:{name:i}}),l(""),a()}catch(e){console.error("Error creating base:",e),alert("Error creating base: "+(e.message||JSON.stringify(e)))}o(!1)}},isBusy:d,disabled:!i||d,children:"Add Base"})})]}),(0,n.jsxs)("div",{style:{marginTop:"30px"},children:[(0,n.jsx)("h3",{children:"Existing Bases"}),(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Name"})]})}),(0,n.jsx)("tbody",{children:0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"2",children:"No bases found. Add some above."})}):e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.name})})]},e.id))})]})]})]})},c=()=>{const[e,a]=(0,s.useState)("colors"),[t,c]=(0,s.useState)("brands"),[h,x]=(0,s.useState)("bases"),[p,j]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[u,b]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[v,C]=(0,s.useState)([]),[w,S]=(0,s.useState)([]);(0,s.useEffect)(()=>{N(),B(),P(),T()},[]);const N=async()=>{try{const e=await r()({path:"/paint-store/v1/brands"});b(e)}catch(e){console.error("Error fetching brands:",e)}},B=async()=>{try{const e=await r()({path:"/paint-store/v1/families"});y(e)}catch(e){console.error("Error fetching families:",e)}},P=async()=>{try{const e=await r()({path:"/paint-store/v1/bases"});C(e)}catch(e){console.error("Error fetching bases:",e)}},T=async()=>{try{const e=await r()({path:"/paint-store/v1/colors"});S(e)}catch(e){console.error("Error fetching colors:",e)}};return(0,n.jsxs)("div",{className:"paint-store-admin-wrap",children:[(0,n.jsx)("h1",{children:"Paint Store Management"}),(0,n.jsxs)("div",{className:"nav-tab-wrapper",style:{marginBottom:"20px"},children:[(0,n.jsx)("button",{className:"nav-tab "+("colors"===e?"nav-tab-active":""),onClick:()=>a("colors"),children:"Colors & Families"}),(0,n.jsx)("button",{className:"nav-tab "+("products"===e?"nav-tab-active":""),onClick:()=>a("products"),children:"Products & Bases"}),(0,n.jsx)("button",{className:"nav-tab "+("settings"===e?"nav-tab-active":""),onClick:()=>a("settings"),children:"Settings"})]}),(0,n.jsxs)("div",{className:"tab-content",children:["colors"===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("ul",{className:"subsubsub",style:{marginBottom:"20px",fontSize:"14px"},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:"#",className:"brands"===t?"current":"",onClick:e=>{e.preventDefault(),c("brands")},children:"Paint Brands"})," |"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:"#",className:"families"===t?"current":"",onClick:e=>{e.preventDefault(),c("families")},children:"Color Families"})," |"]}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"#",className:"colors"===t?"current":"",onClick:e=>{e.preventDefault(),c("colors")},children:"Specific Colors"})})]}),(0,n.jsx)("div",{className:"clear"}),"brands"===t&&(0,n.jsx)(d,{brands:u,fetchBrands:N}),"families"===t&&(0,n.jsx)(i,{families:f,fetchFamilies:B}),"colors"===t&&(0,n.jsx)(l,{colors:w,families:f,allBases:v,brands:u,fetchColors:T})]}),"products"===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("ul",{className:"subsubsub",style:{marginBottom:"20px",fontSize:"14px"},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:"#",className:"bases"===h?"current":"",onClick:e=>{e.preventDefault(),x("bases")},children:"Paint Bases"})," |"]}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"#",className:"products"===h?"current":"",onClick:e=>{e.preventDefault(),x("products")},children:"SKUs / Products"})})]}),(0,n.jsx)("div",{className:"clear"}),"bases"===h&&(0,n.jsx)(o,{bases:v,fetchBases:P}),"products"===h&&(0,n.jsxs)("div",{style:{marginTop:"30px"},children:[(0,n.jsx)("h2",{children:"Manage Products (Coming Soon)"}),(0,n.jsx)("p",{children:"Product mapping interface will go here."})]})]}),"settings"===e&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Store Settings"}),(0,n.jsx)("p",{children:"General store settings."}),(0,n.jsx)("hr",{style:{margin:"40px 0"}}),(0,n.jsx)("h3",{children:"Advanced Tools"}),(0,n.jsx)("p",{children:"If you recently updated the plugin, you may need to initialize or upgrade the database tables."}),(0,n.jsx)("button",{className:"button button-primary",onClick:async()=>{g(!0),j("Running database upgrade...");try{const e=await r()({path:"/paint-store/v1/upgrade-db"});j(JSON.stringify(e,null,2))}catch(e){console.error("Error upgrading DB:",e),j("Error: "+(e.message||JSON.stringify(e)))}g(!1)},disabled:m,children:m?"Upgrading...":"Initialize / Upgrade Database"}),p&&(0,n.jsx)("pre",{style:{marginTop:"20px",padding:"15px",background:"#f0f0f1",border:"1px solid #ccc",overflow:"auto",maxHeight:"400px"},children:p})]})]})]})};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("paint-store-admin-root");e&&(0,s.render)((0,n.jsx)(c,{}),e)})})();