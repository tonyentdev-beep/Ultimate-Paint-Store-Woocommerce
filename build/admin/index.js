(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,s=window.wp.apiFetch;var a=e.n(s);const i=window.wp.components,r=window.ReactJSXRuntime,n=({families:e,fetchFamilies:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(""),[c,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),u=()=>{x(null),l(""),d("")};return(0,r.jsxs)("div",{className:"color-families-manager",children:[(0,r.jsxs)(i.PanelBody,{title:p?"Edit Color Family":"Add New Color Family",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Family Name (e.g., Blues)",value:n,onChange:e=>l(e)})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:"15px"},children:[(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(i.TextControl,{label:"Representative Hex Color (e.g., #0000FF)",value:o,onChange:e=>d(e)})}),(0,r.jsx)("div",{className:"color-swatch-box",style:{width:"45px",height:"45px",backgroundColor:o||"#ffffff",marginTop:"15px"}})]})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){h(!0);try{p?await a()({path:`/paint-store/v1/families/${p}`,method:"PUT",data:{name:n,hex_representative:o}}):await a()({path:"/paint-store/v1/families",method:"POST",data:{name:n,hex_representative:o}}),l(""),d(""),x(null),s()}catch(e){console.error("Error saving family:",e),alert("Error saving family: "+(e.message||JSON.stringify(e)))}h(!1)}},isBusy:c,disabled:!n||c,children:p?"Update Family":"Add Family"}),p&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:u,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{children:"Existing Families"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Slug"}),(0,r.jsx)("th",{children:"Color Hex"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:"No families found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:e.slug})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)("span",{className:"color-swatch-box",style:{display:"inline-block",width:"24px",height:"24px",backgroundColor:e.hex_representative}}),e.hex_representative]})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{x(e.id),l(e.name),d(e.hex_representative)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this family?"))try{await a()({path:`/paint-store/v1/families/${e}`,method:"DELETE"}),p===e&&u(),s()}catch(e){console.error("Error deleting family:",e),alert("Error deleting family: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})]})},l=({colors:e,families:s,allBases:n,brands:l,fetchColors:o})=>{const[d,c]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[x,u]=(0,t.useState)(""),[m,y]=(0,t.useState)(""),[g,j]=(0,t.useState)(""),[f,v]=(0,t.useState)([]),[S,b]=(0,t.useState)(!1),[C,w]=(0,t.useState)(null),[B,E]=(0,t.useState)(""),[k,T]=(0,t.useState)(""),[P,N]=(0,t.useState)(""),[_,I]=(0,t.useState)(1),D=()=>{w(null),c(""),p(""),u(""),y(""),j(""),v([])},z=[{label:"Select a Family...",value:""},...s.map(e=>({label:e.name,value:e.id}))],O=[{label:"Select a Brand...",value:""},...l.map(e=>({label:e.name,value:e.id}))],A=[{label:"All Families",value:""},...s.map(e=>({label:e.name,value:String(e.id)}))],F=[{label:"All Brands",value:""},...l.map(e=>({label:e.name,value:String(e.id)}))],R=(0,t.useMemo)(()=>{let t=e;if(B){const e=B.toLowerCase();t=t.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.color_code&&t.color_code.toLowerCase().includes(e)||t.hex_value&&t.hex_value.toLowerCase().includes(e))}return k&&(t=t.filter(e=>String(e.brand_id)===k)),P&&(t=t.filter(e=>String(e.family_id)===P)),t},[e,B,k,P]),U=Math.max(1,Math.ceil(R.length/25)),$=Math.min(_,U),W=R.slice(25*($-1),25*$);return(0,r.jsxs)("div",{className:"colors-manager",style:{marginTop:"30px"},children:[(0,r.jsxs)(i.PanelBody,{title:C?"Edit Specific Color":"Add New Specific Color",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.TextControl,{label:"Color Name (e.g., Naval Blue)",value:d,onChange:e=>c(e)}),(0,r.jsx)(i.TextControl,{label:"Color Code (e.g., SW 6593)",value:h,onChange:e=>p(e)})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:"15px"},children:[(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(i.TextControl,{label:"Hex Value (e.g., #324354)",value:x,onChange:e=>u(e)})}),(0,r.jsx)("div",{className:"color-swatch-box",style:{width:"45px",height:"45px",backgroundColor:x||"#ffffff",marginTop:"15px"}})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Assign to Family",value:m,options:z,onChange:e=>y(e)}),(0,r.jsx)(i.SelectControl,{label:"Assign to Brand",value:g,options:O,onChange:e=>j(e)})]})}),(0,r.jsxs)("div",{style:{marginTop:"15px",padding:"15px 20px"},children:[(0,r.jsx)("p",{style:{fontWeight:600,marginBottom:"10px"},children:"Compatible Bases (Required)"}),0===n.length?(0,r.jsx)("p",{style:{color:"red",fontStyle:"italic"},children:"Please create Paint Bases in the Products & Bases tab first."}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px"},children:n.map(e=>(0,r.jsx)(i.CheckboxControl,{label:e.name,checked:f.includes(parseInt(e.id)),onChange:()=>{return t=parseInt(e.id),void v(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}},e.id))})]}),(0,r.jsxs)("div",{style:{padding:"0 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(d&&m&&g&&0!==f.length){b(!0);try{const e={name:d,color_code:h,hex_value:x,rgb_value:"",family_id:m,brand_id:g,base_ids:f};C?await a()({path:`/paint-store/v1/colors/${C}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/colors",method:"POST",data:e}),c(""),p(""),u(""),y(""),j(""),v([]),w(null),o()}catch(e){console.error("Error saving color:",e),alert("Error saving color: "+(e.message||JSON.stringify(e)))}b(!1)}else alert("Name, Family, Brand, and at least one Base are required.")},isBusy:S,disabled:!d||!m||!g||0===f.length||S,children:C?"Update Color":"Add Color"}),C&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:D,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{children:"Existing Colors"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"15px",alignItems:"end",marginBottom:"15px",padding:"15px",background:"#f0f0f1",borderRadius:"6px",border:"1px solid #ddd"},children:[(0,r.jsx)(i.TextControl,{label:"Search by name, code, or hex",value:B,onChange:e=>{E(e),I(1)},placeholder:"e.g. Naval or SW 6593"}),(0,r.jsx)(i.SelectControl,{label:"Filter by Brand",value:k,options:F,onChange:e=>{T(e),I(1)}}),(0,r.jsx)(i.SelectControl,{label:"Filter by Family",value:P,options:A,onChange:e=>{N(e),I(1)}}),(0,r.jsx)(i.Button,{variant:"secondary",isSmall:!0,onClick:()=>{E(""),T(""),N(""),I(1)},style:{marginBottom:"8px"},children:"Clear Filters"})]}),(0,r.jsxs)("p",{style:{color:"#666",marginBottom:"10px"},children:["Showing ",(0,r.jsx)("strong",{children:W.length})," of ",(0,r.jsx)("strong",{children:R.length})," colors",R.length!==e.length&&` (${e.length} total)`," "," â€” Page ",(0,r.jsx)("strong",{children:$})," of ",(0,r.jsx)("strong",{children:U})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Code"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Brand"}),(0,r.jsx)("th",{children:"Family"}),(0,r.jsx)("th",{children:"Color Hex"}),(0,r.jsx)("th",{children:"Compatible Bases"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===W.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",children:"No colors match your filters."})}):W.map(e=>{return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.color_code||"-"})}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(h=e.brand_id,h?l.find(e=>parseInt(e.id)===parseInt(h))?.name||h:"-")}),(0,r.jsx)("td",{children:(d=e.family_id,d?s.find(e=>parseInt(e.id)===parseInt(d))?.name||d:"-")}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)("span",{className:"color-swatch-box",style:{display:"inline-block",width:"24px",height:"24px",backgroundColor:e.hex_value}}),e.hex_value]})}),(0,r.jsx)("td",{children:(0,r.jsx)("em",{children:(t=e.base_ids,t&&0!==t.length?t.map(e=>n.find(t=>parseInt(t.id)===e)?.name||e).join(", "):"None")})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{w(e.id),c(e.name),p(e.color_code||""),u(e.hex_value||""),y(0==e.family_id?"":e.family_id),j(0==e.brand_id?"":e.brand_id),v(e.base_ids||[])})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this color?"))try{await a()({path:`/paint-store/v1/colors/${e}`,method:"DELETE"}),C===e&&D(),o()}catch(e){console.error("Error deleting color:",e),alert("Error deleting color: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id);var t,d,h})})]}),U>1&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"20px",padding:"10px"},children:[(0,r.jsx)(i.Button,{variant:"secondary",isSmall:!0,disabled:$<=1,onClick:()=>I(1),children:"Â« First"}),(0,r.jsx)(i.Button,{variant:"secondary",isSmall:!0,disabled:$<=1,onClick:()=>I(e=>Math.max(1,e-1)),children:"â€¹ Prev"}),(0,r.jsxs)("span",{style:{padding:"0 12px",fontWeight:600},children:["Page ",$," of ",U]}),(0,r.jsx)(i.Button,{variant:"secondary",isSmall:!0,disabled:$>=U,onClick:()=>I(e=>Math.min(U,e+1)),children:"Next â€º"}),(0,r.jsx)(i.Button,{variant:"secondary",isSmall:!0,disabled:$>=U,onClick:()=>I(U),children:"Last Â»"})]})]})]})},o=({brands:e,fetchBrands:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),p=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"brands-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Paint Brand":"Add New Paint Brand",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Brand Name (e.g., Sherwin Williams, Benjamin Moore)",value:n,onChange:e=>l(e)})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{c?await a()({path:`/paint-store/v1/brands/${c}`,method:"PUT",data:{name:n}}):await a()({path:"/paint-store/v1/brands",method:"POST",data:{name:n}}),l(""),h(null),s()}catch(e){console.error("Error saving brand:",e),alert("Error saving brand: "+(e.message||JSON.stringify(e)))}d(!1)}},isBusy:o,disabled:!n||o,children:c?"Update Brand":"Add Brand"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:p,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{children:"Existing Brands"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"3",children:"No brands found. Add some above."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this brand?"))try{await a()({path:`/paint-store/v1/brands/${e}`,method:"DELETE"}),c===e&&p(),s()}catch(e){console.error("Error deleting brand:",e),alert("Error deleting brand: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})]})},d=({brands:e,families:s,allBases:n,fetchColors:l})=>{const[o,d]=(0,t.useState)([]),[c,h]=(0,t.useState)([]),[p,x]=(0,t.useState)({name:"",color_code:"",hex_value:""}),[u,m]=(0,t.useState)(""),[y,g]=(0,t.useState)(""),[j,f]=(0,t.useState)([]),[v,S]=(0,t.useState)(!1),[b,C]=(0,t.useState)(null),w=(0,t.useRef)(null),B=[{label:"Select a Brand...",value:""},...e.map(e=>({label:e.name,value:String(e.id)}))],E=[{label:"Select a Family...",value:""},...s.map(e=>({label:e.name,value:String(e.id)}))],k=e=>{const t=[];let s="",a=!1;for(let i=0;i<e.length;i++){const r=e[i];'"'===r?a&&i+1<e.length&&'"'===e[i+1]?(s+='"',i++):a=!a:","!==r||a?s+=r:(t.push(s.trim()),s="")}return t.push(s.trim()),t},T=[{label:"â€” Skip â€”",value:""},...c.map(e=>({label:e,value:e}))];return(0,r.jsxs)("div",{className:"color-importer",children:[(0,r.jsx)(i.PanelBody,{title:"Step 1: Upload CSV File",initialOpen:!0,children:(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("p",{style:{marginBottom:"10px",color:"#666"},children:"Upload a CSV file with your color data. The first row should be column headers."}),(0,r.jsxs)("p",{style:{marginBottom:"15px",color:"#666",fontSize:"12px"},children:[(0,r.jsx)("strong",{children:"Expected columns:"})," Color Name (required), Color Code (optional), Hex Value (optional)"]}),(0,r.jsx)("input",{ref:w,type:"file",accept:".csv,.txt",onChange:e=>{const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>{const{headers:t,rows:s}=(e=>{const t=e.split(/\r?\n/).filter(e=>""!==e.trim());if(t.length<2)return{headers:[],rows:[]};const s=t[0],a=k(s),i=[];for(let e=1;e<t.length;e++){const s=k(t[e]);if(s.length>0&&s.some(e=>""!==e.trim())){const e={};a.forEach((t,a)=>{e[t]=s[a]||""}),i.push(e)}}return{headers:a,rows:i}})(e.target.result);h(t),d(s),C(null);const a={name:"",color_code:"",hex_value:""};t.forEach(e=>{const t=e.toLowerCase();t.includes("name")&&!a.name?a.name=e:t.includes("code")&&!a.color_code?a.color_code=e:t.includes("hex")&&!a.hex_value&&(a.hex_value=e)}),x(a)},s.readAsText(t)},style:{marginBottom:"10px"}}),o.length>0&&(0,r.jsxs)("span",{style:{background:"#dff0d8",color:"#3c763d",padding:"4px 12px",borderRadius:"4px",fontSize:"13px",marginLeft:"10px"},children:["âœ“ ",o.length," rows loaded"]})]})})}),o.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.PanelBody,{title:"Step 2: Map CSV Columns",initialOpen:!0,children:(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Color Name Column *",value:p.name,options:T,onChange:e=>x({...p,name:e})}),(0,r.jsx)(i.SelectControl,{label:"Color Code Column",value:p.color_code,options:T,onChange:e=>x({...p,color_code:e})}),(0,r.jsx)(i.SelectControl,{label:"Hex Value Column",value:p.hex_value,options:T,onChange:e=>x({...p,hex_value:e})})]})})}),(0,r.jsxs)(i.PanelBody,{title:"Step 3: Assign Brand, Family & Bases (applied to ALL rows)",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Brand *",value:u,options:B,onChange:m}),(0,r.jsx)(i.SelectControl,{label:"Color Family *",value:y,options:E,onChange:g})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("label",{style:{fontWeight:600,display:"block",marginBottom:"8px"},children:"Compatible Bases"}),(0,r.jsx)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:n.map(e=>(0,r.jsx)(i.CheckboxControl,{label:e.name,checked:j.includes(parseInt(e.id)),onChange:()=>{return t=parseInt(e.id),void f(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}},e.id))})]})})]}),(0,r.jsx)(i.PanelBody,{title:`Step 4: Preview (first 10 of ${o.length} rows)`,initialOpen:!0,children:(0,r.jsxs)("div",{style:{overflowX:"auto"},children:[(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{fontSize:"13px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"40px"},children:"#"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Code"}),(0,r.jsx)("th",{children:"Hex"}),(0,r.jsx)("th",{style:{width:"50px"},children:"Preview"})]})}),(0,r.jsx)("tbody",{children:o.slice(0,10).map((e,t)=>{const s=p.hex_value?e[p.hex_value]:"",a=s&&!s.startsWith("#")?"#"+s:s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:p.name?e[p.name]:"-"})}),(0,r.jsx)("td",{children:p.color_code?e[p.color_code]:"-"}),(0,r.jsx)("td",{children:a||"-"}),(0,r.jsx)("td",{children:a&&(0,r.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"4px",backgroundColor:a,border:"1px solid #ddd"}})})]},t)})})]}),o.length>10&&(0,r.jsxs)("p",{style:{color:"#666",fontSize:"12px",marginTop:"8px"},children:["...and ",o.length-10," more rows"]})]})}),(0,r.jsxs)("div",{style:{padding:"20px 0",display:"flex",gap:"15px",alignItems:"center"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(!u||!y)return void alert("Please select a Brand and Color Family for all imported colors.");if(!p.name)return void alert('Please map the "Color Name" column.');S(!0),C(null);const e=o.map(e=>({name:e[p.name]||"",color_code:p.color_code&&e[p.color_code]||"",hex_value:p.hex_value&&e[p.hex_value]||"",rgb_value:"",brand_id:parseInt(u),family_id:parseInt(y),base_ids:j}));try{const t=await a()({path:"/paint-store/v1/colors/bulk-import",method:"POST",data:{colors:e}});C(t),t.imported>0&&l()}catch(e){console.error("Bulk import error:",e),C({success:!1,errors:[e.message||JSON.stringify(e)]})}S(!1)},isBusy:v,disabled:v||!p.name||!u||!y,style:{fontSize:"14px",padding:"8px 24px"},children:v?"Importing...":`Import ${o.length} Colors`}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:()=>{d([]),h([]),x({name:"",color_code:"",hex_value:""}),m(""),g(""),f([]),C(null),w.current&&(w.current.value="")},children:"Reset / Start Over"})]}),b&&(0,r.jsxs)("div",{style:{padding:"15px 20px",borderRadius:"6px",marginBottom:"20px",background:b.imported>0?"#dff0d8":"#f2dede",border:"1px solid "+(b.imported>0?"#d6e9c6":"#ebccd1"),color:b.imported>0?"#3c763d":"#a94442"},children:[(0,r.jsx)("strong",{children:b.imported>0?`âœ… Successfully imported ${b.imported} of ${b.total} colors!`:"âŒ Import failed"}),b.errors&&b.errors.length>0&&(0,r.jsxs)("div",{style:{marginTop:"10px",fontSize:"13px"},children:[(0,r.jsx)("strong",{children:"Errors:"}),(0,r.jsx)("ul",{style:{margin:"5px 0 0 20px"},children:b.errors.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]})]})]})]})},c=({bases:e,fetchBases:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),p=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"bases-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Paint Base":"Add New Paint Base",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Base Name (e.g., Deep Base, Extra White)",value:n,onChange:e=>l(e)})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{c?await a()({path:`/paint-store/v1/bases/${c}`,method:"PUT",data:{name:n}}):await a()({path:"/paint-store/v1/bases",method:"POST",data:{name:n}}),l(""),h(null),s()}catch(e){console.error("Error saving base:",e),alert("Error saving base: "+(e.message||JSON.stringify(e)))}d(!1)}},isBusy:o,disabled:!n||o,children:c?"Update Base":"Add Base"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:p,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{children:"Existing Bases"}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"3",children:"No bases found. Add some above."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this base?"))try{await a()({path:`/paint-store/v1/bases/${e}`,method:"DELETE"}),c===e&&p(),s()}catch(e){console.error("Error deleting base:",e),alert("Error deleting base: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})]})},h=({id:e,label:s,value:a,onChange:i})=>{const n=e||"wp-editor-"+Math.random().toString(36).substr(2,9),l=(0,t.useRef)(null),o=(0,t.useRef)(!1);return(0,t.useEffect)(()=>{const e=setTimeout(()=>{window.wp&&window.wp.oldEditor&&!o.current&&(window.wp.oldEditor.initialize(n,{tinymce:{wpautop:!0,plugins:"charmap colorpicker hr lists paste tabfocus textcolor wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wptextpattern",toolbar1:"formatselect | bold italic underline strikethrough | bullist numlist | blockquote | alignleft aligncenter alignright | link unlink | forecolor | removeformat",toolbar2:"",height:200,setup:e=>{e.on("change keyup",()=>{i(e.getContent())})}},quicktags:!0,mediaButtons:!1}),o.current=!0)},100);return()=>{clearTimeout(e),o.current&&window.wp&&window.wp.oldEditor&&(window.wp.oldEditor.remove(n),o.current=!1)}},[]),(0,t.useEffect)(()=>{if(o.current&&window.tinymce){const e=window.tinymce.get(n);e&&e.getContent()!==a&&e.setContent(a||"")}const e=document.getElementById(n);e&&e.value!==a&&(e.value=a||"")},[a]),(0,r.jsxs)("div",{ref:l,style:{width:"100%"},children:[s&&(0,r.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:"8px"},children:s}),(0,r.jsx)("textarea",{id:n,defaultValue:a,style:{width:"100%",minHeight:"200px"}})]})},p=({productFamilies:e,productBrands:s,fetchProductFamilies:n})=>{const[l,o]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[p,x]=(0,t.useState)(""),[u,m]=(0,t.useState)(0),[y,g]=(0,t.useState)(""),[j,f]=(0,t.useState)(!1),[v,S]=(0,t.useState)(null),[b,C]=(0,t.useState)(null),w=[{label:"Select a Brand...",value:""},...s.map(e=>({label:e.name,value:e.id}))],B=()=>{const e=wp.media({title:"Select Product Family Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();m(t.id),g(t.sizes?.medium?.url||t.url)}),e.open()},E=()=>{m(0),g("")},k=()=>{S(null),o(""),c(""),x(""),m(0),g("")};return(0,r.jsxs)("div",{className:"product-families-manager",children:[(0,r.jsxs)(i.PanelBody,{title:v?"Edit Product Family":"Add New Product Family",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.TextControl,{label:"Family Name (e.g., Supreme Edge Interior)",value:l,onChange:o}),(0,r.jsx)(i.SelectControl,{label:"Brand",value:d,options:w,onChange:c})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:"8px"},children:"Family Image"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"15px"},children:[y?(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("img",{src:y,alt:"Product family",style:{maxWidth:"150px",maxHeight:"150px",borderRadius:"6px",border:"1px solid #ddd",objectFit:"cover"}}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:E,style:{position:"absolute",top:"-8px",right:"-8px",borderRadius:"50%",minWidth:"24px",height:"24px",padding:0},children:"âœ•"})]}):(0,r.jsx)("div",{onClick:B,style:{width:"150px",height:"150px",border:"2px dashed #ccc",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#999",fontSize:"13px",textAlign:"center",padding:"10px",transition:"border-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.borderColor="#0073aa",onMouseLeave:e=>e.currentTarget.style.borderColor="#ccc",children:(0,r.jsxs)("span",{children:["ðŸ“·",(0,r.jsx)("br",{}),"Click to upload"]})}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.jsx)(i.Button,{variant:"secondary",onClick:B,children:y?"Change Image":"Upload Image"}),y&&(0,r.jsx)(i.Button,{variant:"tertiary",isDestructive:!0,onClick:E,children:"Remove Image"})]})]})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(h,{id:"ps-product-family-desc",label:"Description (optional)",value:p,onChange:x})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(l&&d){f(!0);try{const e={name:l,brand_id:d,description:p,image_id:u};v?await a()({path:`/paint-store/v1/product-families/${v}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/product-families",method:"POST",data:e}),o(""),c(""),x(""),m(0),g(""),S(null),n()}catch(e){console.error("Error saving product family:",e),alert("Error saving product family: "+(e.message||JSON.stringify(e)))}f(!1)}else alert("Name and Brand are required.")},isBusy:j,disabled:!l||!d||j,children:v?"Update Family":"Add Family"}),v&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:k,children:"Cancel Edit"})]})]}),(0,r.jsx)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{style:{margin:0},children:"Existing Product Families"}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"13px",margin:"5px 0 10px"},children:'Click "WooSync" to generate a WooCommerce Variable Product with Size and Sheen variations.'})]})}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"40px"},children:"ID"}),(0,r.jsx)("th",{style:{width:"50px"},children:"Image"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Brand"}),(0,r.jsx)("th",{children:"WooCommerce"}),(0,r.jsx)("th",{style:{width:"180px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"6",children:"No product families found."})}):e.map(e=>{return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.image_url?(0,r.jsx)("img",{src:e.image_url,alt:e.name,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"}}):(0,r.jsx)("span",{style:{color:"#999",fontSize:"11px"},children:"No image"})}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(t=e.brand_id,t?s.find(e=>parseInt(e.id)===parseInt(t))?.name||t:"-")}),(0,r.jsx)("td",{children:parseInt(e.wc_product_id)>0?(0,r.jsxs)("a",{href:`/wp-admin/post.php?post=${e.wc_product_id}&action=edit`,target:"_blank",rel:"noreferrer",style:{color:"#3c763d",fontSize:"12px",textDecoration:"none",fontWeight:"bold"},children:["âœ“ See Product #",e.wc_product_id]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"primary",onClick:()=>(async e=>{C(e);try{const t=await a()({path:`/paint-store/v1/product-families/${e}/sync`,method:"POST"});alert(`âœ… Synced to WooCommerce! Product ID: ${t.wc_product_id}`),n()}catch(e){console.error("Error syncing product family:",e),alert(`âŒ Error syncing: ${e.message||JSON.stringify(e)}`)}C(null)})(e.id),isBusy:b===e.id,disabled:null!==b,children:"WooSync"}),(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{S(e.id),o(e.name),c(0==e.brand_id?"":e.brand_id),x(e.description||""),m(e.image_id?parseInt(e.image_id):0),g(e.image_url||"")})(e),disabled:null!==b,children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this product family?"))try{await a()({path:`/paint-store/v1/product-families/${e}`,method:"DELETE"}),v===e&&k(),n()}catch(e){alert("Error deleting product family: "+(e.message||JSON.stringify(e)))}})(e.id),disabled:null!==b,children:"Delete"})]})})]},e.id);var t})})]})]})},x=({productCategories:e,fetchProductCategories:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),y=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"product-categories-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Product Category":"Add New Product Category",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Category Name (e.g., Paint, Primer, Paint and Primer)",value:n,onChange:l})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{c?await a()({path:`/paint-store/v1/product-categories/${c}`,method:"PUT",data:{name:n}}):await a()({path:"/paint-store/v1/product-categories",method:"POST",data:{name:n}}),l(""),h(null),s()}catch(e){console.error("Error saving product category:",e),alert("Error saving product category: "+(e.message||JSON.stringify(e)))}d(!1)}},isBusy:o,disabled:!n||o,children:c?"Update Category":"Add Category"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:y,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{style:{margin:0},children:"Existing Product Categories"})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u&&(0,r.jsx)("span",{style:{fontSize:"13px",color:u.includes("âœ…")?"#3c763d":"#a94442"},children:u}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{x(!0),m("");try{const e=await a()({path:"/paint-store/v1/product-categories/sync",method:"POST"});m(`âœ… Synced ${e.synced} categories to WooCommerce!`),s(),setTimeout(()=>m(""),4e3)}catch(e){console.error("Error syncing:",e),m(`âŒ Error: ${e.message||JSON.stringify(e)}`)}x(!1)},isBusy:p,disabled:p,children:"ðŸ”„ Sync with WooCommerce"})]})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Slug"}),(0,r.jsx)("th",{children:"WooCommerce Sync"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:"No product categories found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:e.slug})}),(0,r.jsx)("td",{children:parseInt(e.wc_category_id)>0?(0,r.jsxs)("span",{style:{color:"#3c763d",fontSize:"12px"},children:["âœ“ Synced (ID: ",e.wc_category_id,")"]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this product category?"))try{await a()({path:`/paint-store/v1/product-categories/${e}`,method:"DELETE"}),c===e&&y(),s()}catch(e){alert("Error deleting product category: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})},u=({sizes:e,fetchSizes:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(""),[c,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),[u,m]=(0,t.useState)(!1),[y,g]=(0,t.useState)(""),j=()=>{x(null),l(""),d("")};return(0,r.jsxs)("div",{className:"sizes-manager",children:[(0,r.jsxs)(i.PanelBody,{title:p?"Edit Size":"Add New Size",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.TextControl,{label:"Size Name (e.g., 1 Gallon, 5 Gallon)",value:n,onChange:l}),(0,r.jsx)(i.TextControl,{label:"Liters (e.g., 3.78)",value:o,onChange:d,type:"number",step:"0.01"})]})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){h(!0);try{const e={name:n,liters:parseFloat(o)||0};p?await a()({path:`/paint-store/v1/sizes/${p}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/sizes",method:"POST",data:e}),l(""),d(""),x(null),s()}catch(e){console.error("Error saving size:",e),alert("Error saving size: "+(e.message||JSON.stringify(e)))}h(!1)}},isBusy:c,disabled:!n||c,children:p?"Update Size":"Add Size"}),p&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:j,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{style:{margin:0},children:"Existing Sizes"})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y&&(0,r.jsx)("span",{style:{fontSize:"13px",color:y.includes("âœ…")?"#3c763d":"#a94442"},children:y}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{m(!0),g("");try{const e=await a()({path:"/paint-store/v1/sizes/sync",method:"POST"});g(`âœ… Synced ${e.synced} sizes to WooCommerce!`),s(),setTimeout(()=>g(""),4e3)}catch(e){console.error("Error syncing:",e),g(`âŒ Error: ${e.message||JSON.stringify(e)}`)}m(!1)},isBusy:u,disabled:u,children:"ðŸ”„ Sync with WooCommerce"})]})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Liters"}),(0,r.jsx)("th",{children:"WooCommerce Sync"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:"No sizes found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsxs)("td",{children:[e.liters,"L"]}),(0,r.jsx)("td",{children:parseInt(e.wc_attribute_id)>0?(0,r.jsxs)("span",{style:{color:"#3c763d",fontSize:"12px"},children:["âœ“ Synced (ID: ",e.wc_attribute_id,")"]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{x(e.id),l(e.name),d(e.liters||"")})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this size?"))try{await a()({path:`/paint-store/v1/sizes/${e}`,method:"DELETE"}),p===e&&j(),s()}catch(e){alert("Error deleting size: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})},m=({sheens:e,fetchSheens:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),y=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"sheens-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Sheen":"Add New Sheen",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Sheen Name (e.g., Flat, Eggshell, Satin)",value:n,onChange:l})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{c?await a()({path:`/paint-store/v1/sheens/${c}`,method:"PUT",data:{name:n}}):await a()({path:"/paint-store/v1/sheens",method:"POST",data:{name:n}}),l(""),h(null),s()}catch(e){console.error("Error saving sheen:",e),alert("Error saving sheen: "+(e.message||JSON.stringify(e)))}d(!1)}},isBusy:o,disabled:!n||o,children:c?"Update Sheen":"Add Sheen"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:y,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{style:{margin:0},children:"Existing Sheens"})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u&&(0,r.jsx)("span",{style:{fontSize:"13px",color:u.includes("âœ…")?"#3c763d":"#a94442"},children:u}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{x(!0),m("");try{const e=await a()({path:"/paint-store/v1/sheens/sync",method:"POST"});m(`âœ… Synced ${e.synced} sheens to WooCommerce!`),s(),setTimeout(()=>m(""),4e3)}catch(e){console.error("Error syncing:",e),m(`âŒ Error: ${e.message||JSON.stringify(e)}`)}x(!1)},isBusy:p,disabled:p,children:"ðŸ”„ Sync with WooCommerce"})]})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"WooCommerce Sync"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",children:"No sheens found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:parseInt(e.wc_attribute_id)>0?(0,r.jsxs)("span",{style:{color:"#3c763d",fontSize:"12px"},children:["âœ“ Synced (ID: ",e.wc_attribute_id,")"]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this sheen?"))try{await a()({path:`/paint-store/v1/sheens/${e}`,method:"DELETE"}),c===e&&y(),s()}catch(e){alert("Error deleting sheen: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})},y=({surfaceTypes:e,fetchSurfaceTypes:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),y=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"surface-types-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Surface Type":"Add New Surface Type",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Surface Type (e.g., Interior Walls, Exterior, Deck)",value:n,onChange:l})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{c?await a()({path:`/paint-store/v1/surface-types/${c}`,method:"PUT",data:{name:n}}):await a()({path:"/paint-store/v1/surface-types",method:"POST",data:{name:n}}),l(""),h(null),s()}catch(e){console.error("Error saving surface type:",e),alert("Error saving surface type: "+(e.message||JSON.stringify(e)))}d(!1)}},isBusy:o,disabled:!n||o,children:c?"Update Surface Type":"Add Surface Type"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:y,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{style:{margin:0},children:"Existing Surface Types"})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u&&(0,r.jsx)("span",{style:{fontSize:"13px",color:u.includes("âœ…")?"#3c763d":"#a94442"},children:u}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{x(!0),m("");try{const e=await a()({path:"/paint-store/v1/surface-types/sync",method:"POST"});m(`âœ… Synced ${e.synced} surface types to WooCommerce!`),s(),setTimeout(()=>m(""),4e3)}catch(e){console.error("Error syncing:",e),m(`âŒ Error: ${e.message||JSON.stringify(e)}`)}x(!1)},isBusy:p,disabled:p,children:"ðŸ”„ Sync with WooCommerce"})]})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"WooCommerce Sync"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",children:"No surface types found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:parseInt(e.wc_attribute_id)>0?(0,r.jsxs)("span",{style:{color:"#3c763d",fontSize:"12px"},children:["âœ“ Synced (ID: ",e.wc_attribute_id,")"]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this surface type?"))try{await a()({path:`/paint-store/v1/surface-types/${e}`,method:"DELETE"}),c===e&&y(),s()}catch(e){alert("Error deleting surface type: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})},g=({sceneImages:e,fetchSceneImages:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(0),[c,h]=(0,t.useState)(""),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),y=()=>{const e=wp.media({title:"Select Scene Image (transparent PNG)",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();d(t.id),h(t.sizes?.medium?.url||t.url)}),e.open()},g=()=>{d(0),h("")},j=()=>{m(null),l(""),d(0),h("")};return(0,r.jsxs)("div",{className:"scene-images-manager",children:[(0,r.jsxs)(i.PanelBody,{title:u?"Edit Scene Image":"Add New Scene Image",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Scene Name (e.g., Modern Living Room, Cozy Bedroom)",value:n,onChange:l,style:{width:"100%"}})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("label",{style:{display:"block",fontWeight:600,marginBottom:"8px"},children:"Scene Image (transparent PNG with walls removed)"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"15px"},children:[c?(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{style:{background:"repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%) 50% / 16px 16px",borderRadius:"8px",border:"1px solid #ddd",overflow:"hidden"},children:(0,r.jsx)("img",{src:c,alt:n||"Scene preview",style:{maxWidth:"300px",maxHeight:"200px",display:"block",objectFit:"contain"}})}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:g,style:{position:"absolute",top:"-8px",right:"-8px",borderRadius:"50%",minWidth:"24px",height:"24px",padding:0},children:"âœ•"})]}):(0,r.jsx)("div",{onClick:y,style:{width:"300px",height:"200px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#999",fontSize:"14px",textAlign:"center",padding:"20px",transition:"border-color 0.2s",background:"repeating-conic-gradient(#f5f5f5 0% 25%, #fff 0% 50%) 50% / 16px 16px"},onMouseEnter:e=>e.currentTarget.style.borderColor="#0073aa",onMouseLeave:e=>e.currentTarget.style.borderColor="#ccc",children:(0,r.jsxs)("span",{children:["ðŸ–¼ï¸",(0,r.jsx)("br",{}),"Click to upload scene image",(0,r.jsx)("br",{}),(0,r.jsx)("small",{children:"(transparent PNG)"})]})}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.jsx)(i.Button,{variant:"secondary",onClick:y,children:c?"Change Image":"Upload Image"}),c&&(0,r.jsx)(i.Button,{variant:"tertiary",isDestructive:!0,onClick:g,children:"Remove Image"})]})]}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"12px",marginTop:"8px"},children:"Upload a PNG image of a room with the wall areas made transparent. On the frontend, the selected paint color will show through the transparent wall areas."})]})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n&&o){x(!0);try{const e={name:n,image_id:o};u?await a()({path:`/paint-store/v1/scene-images/${u}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/scene-images",method:"POST",data:e}),l(""),d(0),h(""),m(null),s()}catch(e){console.error("Error saving scene image:",e),alert("Error saving scene image: "+(e.message||JSON.stringify(e)))}x(!1)}else alert("Name and Image are required.")},isBusy:p,disabled:!n||!o||p,children:u?"Update Scene":"Add Scene"}),u&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:j,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{children:"Existing Scene Images"}),(0,r.jsx)("p",{style:{color:"#666",marginBottom:"15px"},children:"These scenes are available for the Color Visualizer â€” customers can preview any color on these room scenes."}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:0===e.length?(0,r.jsx)("p",{style:{color:"#999"},children:"No scene images yet. Upload your first room scene above."}):e.map(e=>(0,r.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",background:"#fff",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,r.jsx)("div",{style:{height:"180px",background:"repeating-conic-gradient(#eee 0% 25%, #fff 0% 50%) 50% / 16px 16px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.image_url?(0,r.jsx)("img",{src:e.image_url,alt:e.name,style:{maxWidth:"100%",maxHeight:"180px",objectFit:"contain"}}):(0,r.jsx)("span",{style:{color:"#999"},children:"No image"})}),(0,r.jsxs)("div",{style:{padding:"12px 16px",borderTop:"1px solid #eee"},children:[(0,r.jsx)("strong",{style:{fontSize:"14px"},children:e.name}),(0,r.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"8px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{m(e.id),l(e.name),d(e.image_id?parseInt(e.image_id):0),h(e.image_url||"")})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this scene image?"))try{await a()({path:`/paint-store/v1/scene-images/${e}`,method:"DELETE"}),u===e&&j(),s()}catch(e){alert("Error deleting scene image: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})]})]},e.id))})]})]})},j=({productBrands:e,fetchProductBrands:s})=>{const[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),y=()=>{h(null),l("")};return(0,r.jsxs)("div",{className:"product-brands-manager",children:[(0,r.jsxs)(i.PanelBody,{title:c?"Edit Product Brand":"Add New Product Brand",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsx)(i.TextControl,{label:"Brand Name (e.g., Valspar, Behr, Berger)",value:n,onChange:l,style:{width:"100%"}})}),(0,r.jsxs)("div",{style:{padding:"10px 20px 20px",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(n){d(!0);try{const e={name:n};c?await a()({path:`/paint-store/v1/product-brands/${c}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/product-brands",method:"POST",data:e}),l(""),h(null),s()}catch(e){console.error("Error saving product brand:",e),alert("Error saving product brand: "+(e.message||JSON.stringify(e)))}d(!1)}else alert("Name is required.")},isBusy:o,disabled:!n||o,children:c?"Update Brand":"Add Brand"}),c&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:y,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{style:{margin:0},children:"Existing Product Brands"}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"13px",margin:"5px 0 10px"},children:"These are the paint manufacturers/brands for products and product families â€” separate from color brands."})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u&&(0,r.jsx)("span",{style:{fontSize:"13px",color:u.includes("âœ…")?"#3c763d":"#a94442"},children:u}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{x(!0),m("");try{const e=await a()({path:"/paint-store/v1/product-brands/sync",method:"POST"});m(`âœ… Synced ${e.synced} brands to WooCommerce attributes!`),s(),setTimeout(()=>m(""),4e3)}catch(e){console.error("Error syncing:",e),m(`âŒ Error: ${e.message||JSON.stringify(e)}`)}x(!1)},isBusy:p,disabled:p,children:"ðŸ”„ Sync with WooCommerce"})]})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"60px"},children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"WooCommerce Sync"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"3",children:"No product brands found."})}):e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.name})}),(0,r.jsx)("td",{children:parseInt(e.wc_attribute_id)>0?(0,r.jsxs)("span",{style:{color:"#3c763d",fontSize:"12px"},children:["âœ“ Synced (ID: ",e.wc_attribute_id,")"]}):(0,r.jsx)("span",{style:{color:"#a94442",fontSize:"12px"},children:"Not synced"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{h(e.id),l(e.name)})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this product brand?"))try{await a()({path:`/paint-store/v1/product-brands/${e}`,method:"DELETE"}),c===e&&y(),s()}catch(e){alert("Error deleting product brand: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id))})]})]})},f=({products:e,productFamilies:s,bases:n,sizes:l,sheens:o,surfaceTypes:d,fetchProducts:c})=>{const[h,p]=(0,t.useState)(""),[x,u]=(0,t.useState)(""),[m,y]=(0,t.useState)(""),[g,j]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[S,b]=(0,t.useState)(""),[C,w]=(0,t.useState)("0.00"),[B,E]=(0,t.useState)("0"),[k,T]=(0,t.useState)(!1),[P,N]=(0,t.useState)(null),_=[{label:"Select Product Family...",value:""},...s.map(e=>({label:e.name,value:e.id.toString()}))],I=[{label:"Select Base...",value:""},...n.map(e=>({label:e.name,value:e.id.toString()}))],D=[{label:"Select Size...",value:""},...(l||[]).map(e=>({label:e.name,value:e.id.toString()}))],z=[{label:"Select Sheen...",value:""},...(o||[]).map(e=>({label:e.name,value:e.id.toString()}))],O=[{label:"Select Surface/Project Type...",value:""},...(d||[]).map(e=>({label:e.name,value:e.id.toString()}))],A=e=>n.find(t=>parseInt(t.id)===parseInt(e))?.name||"-",F=e=>l.find(t=>parseInt(t.id)===parseInt(e))?.name||"-",R=e=>{const t=l.find(t=>parseInt(t.id)===parseInt(e));return t?parseFloat(t.liters||0):0},U=e=>o.find(t=>parseInt(t.id)===parseInt(e))?.name||"-",$=e=>d.find(t=>parseInt(t.id)===parseInt(e))?.name||"-",W=()=>{N(null),p(""),u(""),y(""),j(""),v(""),b(""),w("0.00"),E("0")};return(0,r.jsxs)("div",{className:"products-manager",children:[(0,r.jsxs)(i.PanelBody,{title:P?"Edit Physical SKU":"Add Physical SKU",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Parent Product Family",value:h,options:_,onChange:p}),(0,r.jsx)(i.SelectControl,{label:"Required Paint Base",value:x,options:I,onChange:u})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Size",value:m,options:D,onChange:y}),(0,r.jsx)(i.SelectControl,{label:"Sheen",value:g,options:z,onChange:j}),(0,r.jsx)(i.SelectControl,{label:"Surface/Project Type",value:f,options:O,onChange:v})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",width:"100%",marginTop:"15px"},children:[(0,r.jsx)(i.TextControl,{label:"SKU (Stock Keeping Unit)",value:S,onChange:b}),(0,r.jsx)(i.TextControl,{type:"number",step:"0.01",label:"Base Price ($)",value:C,onChange:w}),(0,r.jsx)(i.TextControl,{type:"number",step:"1",label:"Stock Quantity",value:B,onChange:E})]})}),(0,r.jsxs)("div",{style:{padding:"20px 0 0 0",display:"flex",gap:"10px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{if(h&&x&&m&&g&&f){T(!0);try{const e={family_id:h,base_id:x,size_id:m,sheen_id:g,surface_id:f,sku:S,price:parseFloat(C)||0,stock_quantity:parseInt(B,10)||0};P?await a()({path:`/paint-store/v1/products/${P}`,method:"PUT",data:e}):await a()({path:"/paint-store/v1/products",method:"POST",data:e}),W(),c()}catch(e){console.error("Error saving physical product:",e),alert("Error saving physical product: "+(e.message||JSON.stringify(e)))}T(!1)}else alert("All relation fields are required to map a physical product.")},isBusy:k,disabled:!h||!x||!m||!g||!f||k,children:P?"Update Physical SKU":"Add Physical SKU"}),P&&(0,r.jsx)(i.Button,{variant:"secondary",onClick:W,children:"Cancel Edit"})]})]}),(0,r.jsxs)("div",{style:{marginTop:"30px"},children:[(0,r.jsx)("h3",{style:{margin:0},children:"Physical Products Inventory (SKUs)"}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"13px",margin:"5px 0 10px"},children:"These explicitly map existing Paint Bases in the real world to specific container Sizes and Sheens."})]}),(0,r.jsxs)("table",{className:"wp-list-table widefat fixed striped",style:{marginTop:"10px"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"50px"},children:"ID"}),(0,r.jsx)("th",{children:"Family"}),(0,r.jsx)("th",{children:"Base"}),(0,r.jsx)("th",{children:"Size"}),(0,r.jsx)("th",{children:"Sheen"}),(0,r.jsx)("th",{children:"Surface"}),(0,r.jsx)("th",{children:"SKU"}),(0,r.jsx)("th",{children:"Price"}),(0,r.jsx)("th",{children:"Stock"}),(0,r.jsx)("th",{children:"Total Volume"}),(0,r.jsx)("th",{style:{width:"120px"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"11",children:"No physical products found."})}):e.map(e=>{return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:(t=e.family_id,s.find(e=>parseInt(e.id)===parseInt(t))?.name||"-")})}),(0,r.jsx)("td",{children:A(e.base_id)}),(0,r.jsx)("td",{children:F(e.size_id)}),(0,r.jsx)("td",{children:U(e.sheen_id)}),(0,r.jsx)("td",{children:$(e.surface_id)}),(0,r.jsx)("td",{children:(0,r.jsx)("code",{children:e.sku||"-"})}),(0,r.jsxs)("td",{children:["$",parseFloat(e.price).toFixed(2)]}),(0,r.jsx)("td",{children:e.stock_quantity}),(0,r.jsx)("td",{children:e.stock_quantity>0&&R(e.size_id)>0?(e.stock_quantity*R(e.size_id)).toFixed(2)+" L":"-"}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)(i.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{N(e.id),p(e.family_id.toString()),u(e.base_id.toString()),y(e.size_id.toString()),j(e.sheen_id.toString()),v(e.surface_id.toString()),b(e.sku),w(e.price.toString()),E((e.stock_quantity||0).toString())})(e),children:"Edit"}),(0,r.jsx)(i.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this specific SKU?"))try{await a()({path:`/paint-store/v1/products/${e}`,method:"DELETE"}),P===e&&W(),c()}catch(e){alert("Error deleting physical product: "+(e.message||JSON.stringify(e)))}})(e.id),children:"Delete"})]})})]},e.id);var t})})]})]})},v=()=>{const[e,s]=(0,t.useState)(null),[i,n]=(0,t.useState)(!0);(0,t.useEffect)(()=>{l()},[]);const l=async()=>{n(!0);try{const e=await a()({path:"/paint-store/v1/dashboard-stats"});s(e)}catch(e){console.error("Error fetching dashboard stats:",e)}n(!1)};return i?(0,r.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:(0,r.jsx)("p",{style:{fontSize:"16px"},children:"Loading dashboard..."})}):(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,r.jsx)("h2",{style:{margin:"0 0 8px",fontSize:"22px",color:"#1e1e1e"},children:"Dashboard"}),(0,r.jsx)("p",{style:{margin:0,color:"#757575",fontSize:"14px"},children:"Overview of your paint store data."})]}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px",marginBottom:"30px"},children:[{key:"brands",label:"Brands",icon:"ðŸ·ï¸",color:"#4F46E5"},{key:"color_families",label:"Color Families",icon:"ðŸŽ¨",color:"#7C3AED"},{key:"colors",label:"Colors",icon:"ðŸ–Œï¸",color:"#DB2777"},{key:"bases",label:"Bases",icon:"ðŸ§ª",color:"#DC2626"},{key:"product_families",label:"Product Families",icon:"ðŸ“¦",color:"#EA580C"},{key:"product_categories",label:"Product Categories",icon:"ðŸ“‚",color:"#D97706"},{key:"sizes",label:"Sizes",icon:"ðŸ“",color:"#CA8A04"},{key:"sheens",label:"Sheens",icon:"âœ¨",color:"#65A30D"},{key:"surface_types",label:"Surface Types",icon:"ðŸ§±",color:"#0D9488"},{key:"scene_images",label:"Scene Images",icon:"ðŸ–¼ï¸",color:"#0284C7"}].map(t=>(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:"10px",padding:"20px",border:"1px solid #e0e0e0",boxShadow:"0 1px 3px rgba(0,0,0,0.06)",transition:"transform 0.15s, box-shadow 0.15s",cursor:"default"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.06)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,r.jsx)("span",{style:{fontSize:"28px"},children:t.icon}),(0,r.jsx)("span",{style:{fontSize:"32px",fontWeight:700,color:t.color,lineHeight:1},children:e?e[t.key]:0})]}),(0,r.jsx)("div",{style:{fontSize:"13px",fontWeight:600,color:"#555",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.label})]},t.key))}),(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:"10px",padding:"24px",border:"1px solid #e0e0e0",boxShadow:"0 1px 3px rgba(0,0,0,0.06)"},children:[(0,r.jsx)("h3",{style:{margin:"0 0 12px",fontSize:"16px",color:"#1e1e1e"},children:"Quick Start Guide"}),(0,r.jsxs)("ol",{style:{margin:0,paddingLeft:"20px",color:"#555",lineHeight:"2"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Brands"})," â€” Add your paint brands (e.g., Valspar, Sherwin-Williams)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Color Families"})," â€” Create color families (e.g., Blues, Greens, Neutrals)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Colors"})," â€” Add individual colors or bulk import via CSV"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Bases"})," â€” Define paint bases (e.g., White Base, Deep Base)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Product Families"})," â€” Create product lines (e.g., Supreme Edge Interior)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Scene Images"})," â€” Upload room scenes for the Color Visualizer"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"WooCommerce"})," â€” Link everything to products for checkout"]})]})]})]})},S=()=>{const[e,s]=(0,t.useState)({store_name:"",currency:"USD",measurement_unit:"gallons",store_phone:"",store_email:"",store_address:""}),[n,l]=(0,t.useState)(!1),[o,d]=(0,t.useState)(""),[c,h]=(0,t.useState)(""),[p,x]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!0);(0,t.useEffect)(()=>{y()},[]);const y=async()=>{m(!0);try{const e=await a()({path:"/paint-store/v1/settings"});s(e)}catch(e){console.error("Error fetching settings:",e)}m(!1)},g=(e,t)=>{s(s=>({...s,[e]:t}))};return u?(0,r.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading settings..."}):(0,r.jsxs)("div",{className:"settings-page",children:[(0,r.jsxs)(i.PanelBody,{title:"Store Information",initialOpen:!0,children:[(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.TextControl,{label:"Store Name",value:e.store_name,onChange:e=>g("store_name",e),placeholder:"My Paint Store"}),(0,r.jsx)(i.TextControl,{label:"Store Phone",value:e.store_phone,onChange:e=>g("store_phone",e),placeholder:"+1 (868) 555-0123"})]})}),(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.TextControl,{label:"Store Email",value:e.store_email,onChange:e=>g("store_email",e),placeholder:"info@mypaintstore.com"}),(0,r.jsx)(i.TextareaControl,{label:"Store Address",value:e.store_address,onChange:e=>g("store_address",e),placeholder:"123 Main St, City, Country",rows:2})]})})]}),(0,r.jsx)(i.PanelBody,{title:"Display & Units",initialOpen:!0,children:(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",width:"100%"},children:[(0,r.jsx)(i.SelectControl,{label:"Currency",value:e.currency,options:[{label:"USD ($)",value:"USD"},{label:"EUR (â‚¬)",value:"EUR"},{label:"GBP (Â£)",value:"GBP"},{label:"CAD (C$)",value:"CAD"},{label:"AUD (A$)",value:"AUD"},{label:"TTD (TT$)",value:"TTD"},{label:"JMD (J$)",value:"JMD"},{label:"BBD (Bds$)",value:"BBD"},{label:"XCD (EC$)",value:"XCD"},{label:"GYD (G$)",value:"GYD"}],onChange:e=>g("currency",e)}),(0,r.jsx)(i.SelectControl,{label:"Measurement Unit",value:e.measurement_unit,options:[{label:"Gallons",value:"gallons"},{label:"Liters",value:"liters"},{label:"Quarts",value:"quarts"}],onChange:e=>g("measurement_unit",e)})]})})}),(0,r.jsxs)("div",{style:{padding:"20px 0",display:"flex",alignItems:"center",gap:"15px"},children:[(0,r.jsx)(i.Button,{variant:"primary",onClick:async()=>{l(!0),d("");try{await a()({path:"/paint-store/v1/settings",method:"POST",data:e}),d("âœ… Settings saved successfully!"),setTimeout(()=>d(""),3e3)}catch(e){console.error("Error saving settings:",e),d("âŒ Error saving settings.")}l(!1)},isBusy:n,disabled:n,style:{fontSize:"14px",padding:"8px 24px"},children:n?"Saving...":"Save Settings"}),o&&(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:500,color:o.includes("âœ…")?"#3c763d":"#a94442"},children:o})]}),(0,r.jsx)(i.PanelBody,{title:"Advanced Tools",initialOpen:!1,children:(0,r.jsx)(i.PanelRow,{children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 8px"},children:"Database Management"}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"13px",margin:"0 0 15px"},children:"If you recently updated the plugin or added new features, click below to initialize or upgrade the database tables."}),(0,r.jsx)(i.Button,{variant:"secondary",onClick:async()=>{x(!0),h("Running database upgrade...");try{const e=await a()({path:"/paint-store/v1/upgrade-db"});h(JSON.stringify(e,null,2))}catch(e){console.error("Error upgrading DB:",e),h("Error: "+(e.message||JSON.stringify(e)))}x(!1)},disabled:p,children:p?"Upgrading...":"Initialize / Upgrade Database"}),c&&(0,r.jsx)("pre",{style:{marginTop:"15px",padding:"15px",background:"#f0f0f1",border:"1px solid #ccc",overflow:"auto",maxHeight:"300px",fontSize:"12px",borderRadius:"4px"},children:c})]})})})]})},b=()=>{const[e,s]=(0,t.useState)("dashboard"),[i,h]=(0,t.useState)("brands"),[b,C]=(0,t.useState)("bases"),[w,B]=(0,t.useState)([]),[E,k]=(0,t.useState)([]),[T,P]=(0,t.useState)([]),[N,_]=(0,t.useState)([]),[I,D]=(0,t.useState)([]),[z,O]=(0,t.useState)([]),[A,F]=(0,t.useState)([]),[R,U]=(0,t.useState)([]),[$,W]=(0,t.useState)([]),[J,L]=(0,t.useState)([]),[M,q]=(0,t.useState)([]),[G,H]=(0,t.useState)([]);(0,t.useEffect)(()=>{V(),K(),X(),Y(),Q(),Z(),ee(),te(),se(),ae(),ie(),re()},[]);const V=async()=>{try{const e=await a()({path:"/paint-store/v1/brands"});B(e)}catch(e){console.error("Error fetching brands:",e)}},K=async()=>{try{const e=await a()({path:"/paint-store/v1/families"});k(e)}catch(e){console.error("Error fetching families:",e)}},X=async()=>{try{const e=await a()({path:"/paint-store/v1/bases"});P(e)}catch(e){console.error("Error fetching bases:",e)}},Y=async()=>{try{const e=await a()({path:"/paint-store/v1/colors"});_(e)}catch(e){console.error("Error fetching colors:",e)}},Q=async()=>{try{const e=await a()({path:"/paint-store/v1/product-families"});D(e)}catch(e){console.error("Error fetching product families:",e)}},Z=async()=>{try{const e=await a()({path:"/paint-store/v1/product-categories"});O(e)}catch(e){console.error("Error fetching product categories:",e)}},ee=async()=>{try{const e=await a()({path:"/paint-store/v1/sizes"});F(e)}catch(e){console.error("Error fetching sizes:",e)}},te=async()=>{try{const e=await a()({path:"/paint-store/v1/sheens"});U(e)}catch(e){console.error("Error fetching sheens:",e)}},se=async()=>{try{const e=await a()({path:"/paint-store/v1/surface-types"});W(e)}catch(e){console.error("Error fetching surface types:",e)}},ae=async()=>{try{const e=await a()({path:"/paint-store/v1/scene-images"});L(e)}catch(e){console.error("Error fetching scene images:",e)}},ie=async()=>{try{const e=await a()({path:"/paint-store/v1/product-brands"});q(e)}catch(e){console.error("Error fetching product brands:",e)}},re=async()=>{try{const e=await a()({path:"/paint-store/v1/products"});H(e)}catch(e){console.error("Error fetching physical products:",e)}},ne=[{key:"product-brands",label:"Product Brands"},{key:"product-families",label:"Product Families"},{key:"products",label:"Physical Products (SKUs)"},{key:"bases",label:"Paint Bases"},{key:"product-categories",label:"Product Categories"},{key:"sizes",label:"Sizes"},{key:"sheens",label:"Sheens"},{key:"surface-types",label:"Surface Types"},{key:"scene-images",label:"Scene Images"}];return(0,r.jsxs)("div",{className:"paint-store-admin-wrap",children:[(0,r.jsx)("h1",{children:"Paint Store Management"}),(0,r.jsxs)("div",{className:"nav-tab-wrapper",style:{marginBottom:"20px"},children:[(0,r.jsx)("button",{className:"nav-tab "+("dashboard"===e?"nav-tab-active":""),onClick:()=>s("dashboard"),children:"Dashboard"}),(0,r.jsx)("button",{className:"nav-tab "+("colors"===e?"nav-tab-active":""),onClick:()=>s("colors"),children:"Colors & Families"}),(0,r.jsx)("button",{className:"nav-tab "+("products"===e?"nav-tab-active":""),onClick:()=>s("products"),children:"Products & Bases"}),(0,r.jsx)("button",{className:"nav-tab "+("settings"===e?"nav-tab-active":""),onClick:()=>s("settings"),children:"Settings"})]}),(0,r.jsxs)("div",{className:"tab-content",children:["dashboard"===e&&(0,r.jsx)(v,{}),"colors"===e&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("ul",{className:"subsubsub",style:{marginBottom:"20px",fontSize:"14px"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"#",className:"brands"===i?"current":"",onClick:e=>{e.preventDefault(),h("brands")},children:"Paint Brands"})," |"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"#",className:"families"===i?"current":"",onClick:e=>{e.preventDefault(),h("families")},children:"Color Families"})," |"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"#",className:"colors"===i?"current":"",onClick:e=>{e.preventDefault(),h("colors")},children:"Specific Colors"})," |"]}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",className:"import"===i?"current":"",onClick:e=>{e.preventDefault(),h("import")},children:"ðŸ“¥ Import Colors"})})]}),(0,r.jsx)("div",{className:"clear"}),"brands"===i&&(0,r.jsx)(o,{brands:w,fetchBrands:V}),"families"===i&&(0,r.jsx)(n,{families:E,fetchFamilies:K}),"colors"===i&&(0,r.jsx)(l,{colors:N,families:E,allBases:T,brands:w,fetchColors:Y}),"import"===i&&(0,r.jsx)(d,{brands:w,families:E,allBases:T,fetchColors:Y})]}),"products"===e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("ul",{className:"subsubsub",style:{marginBottom:"20px",fontSize:"14px"},children:ne.map((e,t)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"#",className:b===e.key?"current":"",onClick:t=>{t.preventDefault(),C(e.key)},children:e.label}),t<ne.length-1?" | ":""]},e.key))}),(0,r.jsx)("div",{className:"clear"}),"product-brands"===b&&(0,r.jsx)(j,{productBrands:M,fetchProductBrands:ie}),"bases"===b&&(0,r.jsx)(c,{bases:T,fetchBases:X}),"product-families"===b&&(0,r.jsx)(p,{productFamilies:I,productBrands:M,fetchProductFamilies:Q}),"products"===b&&(0,r.jsx)(f,{products:G,productFamilies:I,bases:T,sizes:A,sheens:R,surfaceTypes:$,fetchProducts:re}),"product-categories"===b&&(0,r.jsx)(x,{productCategories:z,fetchProductCategories:Z}),"sizes"===b&&(0,r.jsx)(u,{sizes:A,fetchSizes:ee}),"sheens"===b&&(0,r.jsx)(m,{sheens:R,fetchSheens:te}),"surface-types"===b&&(0,r.jsx)(y,{surfaceTypes:$,fetchSurfaceTypes:se}),"scene-images"===b&&(0,r.jsx)(g,{sceneImages:J,fetchSceneImages:ae})]}),"settings"===e&&(0,r.jsx)(S,{})]})]})};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("paint-store-admin-root");e&&(0,t.render)((0,r.jsx)(b,{}),e)})})();